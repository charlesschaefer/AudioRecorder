function AudioRecorder(script_base,url,el,save_url){this.url=url+"?";if(save_url===undefined){save_url=url;}this.save_url=save_url;$(el).find('#flash').remove();$(el).append('<div id="flash"></div>');var script=document.createElement('script');$('body').append(script);script.onload=function(){Wami.setup({id:'flash',swfUrl:script_base+"/wami/Wami.swf"});};script.src=script_base+'/wami/recorder.js';}AudioRecorder.prototype.start=function(){Wami.startRecording(this.url);};AudioRecorder.prototype.stop=function(){Wami.stopRecording();Wami.stopPlaying();};AudioRecorder.prototype.play=function(){Wami.startPlaying(this.url);};AudioRecorder.prototype.pause=function(){Wami.stopPlaying();};AudioRecorder.prototype.save=function(fn){$.ajax({url:this.save_url,complete:function(){fn&&fn();}});};
